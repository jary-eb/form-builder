import{r as c,R as l}from"./index-DHo17Z-2.js";import{A as E,I as C,D as x}from"./Add-Tg1wRw98.js";import{u as y,a as I,b as k,c as D}from"./useTranslation-CIlBtmPs.js";import{s as h,T as f}from"./TextField-CrZXFGCP.js";import{B as b}from"./Box-BLsYhM4q.js";import{v as M}from"./v4-CtRu48qb.js";import{T as F,B as T,F as A}from"./FormControlLabel-DOMja7zO.js";import{C as B}from"./Checkbox-C2ofCMxJ.js";const w=h(f)({"& .MuiOutlinedInput-root":{padding:"8px 16px","&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#005EF9",borderWidth:"2px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#005EF97A"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#005EF9"}},"& .MuiInputBase-input":{lineHeight:"24px",height:"24px",padding:"8px 0px","&::placeholder":{opacity:0},"&:focus::placeholder":{opacity:1}},"& .MuiInputLabel-root":{lineHeight:"36px"}}),V=h(b)(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1),marginBottom:e.spacing(2.5),position:"relative","&:hover .drag-handle":{opacity:1}})),z=h(b)({opacity:0,cursor:"move",transition:"opacity 0.2s",display:"flex",alignItems:"center"}),H=({option:e,index:n,onDelete:p,onChange:u,onMove:m,isChecked:s,onCheckboxChange:d,disableDelete:g})=>{const{t:i}=y(),[{isDragging:a},r]=I({type:"option",item:{type:"option",id:e.id,index:n},collect:o=>({isDragging:o.isDragging()})}),[,t]=k({accept:"option",hover:o=>{o.index!==n&&(m(o.index,n),o.index=n)}});return l.createElement(V,{ref:o=>r(t(o)),style:{opacity:a?.5:1}},l.createElement(z,{className:"drag-handle",title:i("common.dragToReorder")},l.createElement(D,null)),l.createElement(A,{control:l.createElement(B,{checked:s,onChange:o=>d(o.target.checked),size:"small",color:"primary"}),label:""}),l.createElement(w,{fullWidth:!0,size:"small",label:i("choice.optionLabel",{number:n+1}),value:e.label,onChange:o=>u(o.target.value),placeholder:i("choice.optionLabel",{number:n+1}),variant:"outlined"}),l.createElement(C,{onClick:p,disabled:g,"data-testid":"delete-option-button",size:"small",title:i("common.delete")},l.createElement(x,null)))},L=({field:e,onChange:n})=>{var i;const{t:p}=y(),u=c.useCallback((a,r)=>{const t=[...e.options];t[a]={...t[a],label:r,value:r},n({...e,options:t})},[e,n]),m=c.useCallback(a=>{const r=e.options.filter((t,o)=>o!==a);n({...e,options:r})},[e,n]),s=c.useCallback(()=>{const a={id:M(),label:"",value:""};n({...e,options:[...e.options||[],a]})},[e,n]),d=c.useCallback((a,r)=>{const t=[...e.options],o=t[a];t.splice(a,1),t.splice(r,0,o),n({...e,options:t})},[e,n]),g=c.useCallback((a,r)=>{const t=e.options[a].value,o=Array.isArray(e.defaultValue)?e.defaultValue:[],O=r?[...o,t]:o.filter(v=>v!==t);n({...e,defaultValue:O})},[e,n]);return l.useEffect(()=>{(!e.options||e.options.length===0)&&s()},[e.options,s]),l.createElement(b,{my:"20px"},l.createElement(F,{fontSize:14,fontWeight:600,mb:"20px",lineHeight:"20px"},p("choice.options.multiple")),(i=e.options)==null?void 0:i.map((a,r)=>l.createElement(H,{key:a.id,option:a,index:r,onDelete:()=>m(r),onChange:t=>u(r,t),onMove:d,isChecked:Array.isArray(e.defaultValue)&&e.defaultValue.includes(a.value),onCheckboxChange:t=>g(r,t),disableDelete:e.options.length<=1})),l.createElement(T,{startIcon:l.createElement(E,null),onClick:s,variant:"text",color:"primary",sx:{mt:1}},p("choice.addOption")))};L.__docgenInfo={description:"",methods:[],displayName:"MultipleChoice",props:{field:{required:!0,tsType:{name:"Field"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: Field) => void",signature:{arguments:[{type:{name:"Field"},name:"field"}],return:{name:"void"}}},description:""}}};export{L as M};
